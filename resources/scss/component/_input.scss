/* 입력 필드 / 텍스트 영역 */
//사이즈 정의
@mixin input-size-variable() {
	$input-size: (
		small: (
			size-height: var(--upl-size-height-6),
			radius: var(--upl-radius-medium1),
			pc-font-size: var(--upl-pc-font-size-label-small),
			mobile-font-size: var(--upl-mobile-font-size-label-small),
		),
		medium: (
			size-height: var(--upl-size-height-7),
			radius: var(--upl-radius-medium2),
			pc-font-size: var(--upl-pc-font-size-label-medium),
			mobile-font-size: var(--upl-mobile-font-size-label-medium),
		),
		large: (
			size-height: var(--upl-size-height-8),
			radius: var(--upl-radius-medium3),
			pc-font-size: var(--upl-pc-font-size-label-large),
			mobile-font-size: var(--upl-mobile-font-size-label-large),
		),
		xlarge: (
			size-height: var(--upl-size-height-11),
			radius: var(--upl-radius-large2),
			pc-font-size: var(--upl-pc-font-size-heading-medium),
			mobile-font-size: var(--upl-mobile-font-size-heading-medium),
		),
	) !default;

	//css variable 생성
	--upl-input--padding-x: var(--upl-padding-6);
	@each $size, $types in $input-size {
		@each $type, $value in $types {
			//css variable 생성
			--upl-input--#{$type}-#{$size}: #{$value};
		}
	}

	//class 정의
	& {
		@include input-size(large);

		@each $size, $types in $input-size {
			&.#{$size} {
				@include input-size(#{$size});
			}
		}
	}
}

@mixin input-size($unit) {
	height: var(--upl-input--size-height-#{$unit});
	border-radius: var(--upl-input--radius-#{$unit});
	font-size: var(--upl-input--pc-font-size-#{$unit});
	@if ($unit == 'xlarge') {
		font-weight: var(--upl-font-weight-bold);
	}
	@include size-medium {
		font-size: var(--upl-input--mobile-font-size-#{$unit});
	}
}

//컬러 정의
@mixin input-color-variable($mode: light) {
	--upl-input--color-surface: var(--upl-#{$mode}-color-input-surface);
	--upl-input--color-surface-readonly: var(--upl-#{$mode}-color-input-surface-disabled);
	--upl-input--color-surface-disabled: var(--upl-#{$mode}-color-input-surface-disabled);
	--upl-input--color-surface-error: var(--upl-#{$mode}-color-input-surface);
	--upl-input--color-border: var(--upl-#{$mode}-color-input-border);
	--upl-input--color-border-active: var(--upl-#{$mode}-color-input-border-active);
	--upl-input--color-border-readonly: var(--upl-#{$mode}-color-input-border-disabled);
	--upl-input--color-border-disabled: var(--upl-#{$mode}-color-input-border-disabled);
	--upl-input--color-border-error: var(--upl-#{$mode}-color-input-border-error);
	--upl-input--color-text: var(--upl-#{$mode}-color-text-subtle);
	--upl-input--color-text-active: var(--upl-#{$mode}-color-text-basic);
	--upl-input--color-text-readonly: var(--upl-#{$mode}-color-text-subtle);
	--upl-input--color-text-disabled: var(--upl-#{$mode}-color-text-disabled-on);
	--upl-input--color-text-placeholder: var(--upl-#{$mode}-color-text-disabled);
	--upl-input--color-text-error: var(--upl-#{$mode}-color-text-subtle);
}

//모드 설정
$mode-setting: light;
.upl-input {
	@include input-color-variable($mode: #{$mode-setting});
	@include input-size-variable();
	
	& {
		//default size large
		position: relative;
		width: 100%;
		padding:0 var(--upl-input--padding-x);
		@include border-size-mode(#{$mode-setting});
		background-color: var(--upl-input--color-surface);
		border: 0.1rem solid var(--upl-input--color-border);
		font-family: inherit;
		color: var(--upl-input--color-text);
		transition: var(--upl-transition-base);
	}
	&:focus,
	&.focus {
		border-color: var(--upl-input--color-border-active);
		border-width: 2px;
		outline: none;
		box-shadow: none;
	}
	&[readonly] {
		background-color: var(--upl-input--color-surface-readonly);
		border-color: var(--upl-input--color-border-readonly);
		color: var(--upl-input--color-text-readonly);
		&.datepicker {
			background-color: var(--upl-input--color-surface);
			border-color: var(--upl-input--color-border );
			color: var(--upl-input--color-text);
		}
		&:focus {
			border-color: var(--upl-input--color-border-active);
		}
	}
	&[disabled] {
		background-color: var(--upl-input--color-surface-disabled);
		border-color: var(--upl-input--color-border-disabled);
		color: var(--upl-input--color-text-disabled);
	}
	&::-webkit-input-placeholder {
		color: var(--upl-input--color-text-placeholder);
	}
	&::-moz-placeholder {
		color: var(--upl-input--color-text-placeholder);
	}
	&:-ms-input-placeholder {
		color: var(--upl-input--color-text-placeholder);
	}
	&::-ms-input-placeholder {
		color: var(--upl-input--color-text-placeholder);
	}
	&:not(textarea):placeholder-shown {
		@include ellipsis(1);
	}
}
textarea {
	&.upl-input {
		--upl-input--textarea-size-height: 14.4rem;
		--upl-input--textarea-padding-x: var(--upl-padding-6);
		--upl-input--textarea-padding-y: var(--upl-padding-3);
		height: var(--upl-input--textarea-size-height);
		padding: var(--upl-input--textarea-padding-y) var(--upl-input--textarea-padding-x);
		line-height: var(--upl-transition-base);
	}
}
.is-error {
	.upl-input {
		background-color: var(--upl-input--color-surface-error);
		border-color: var(--upl-input--color-border-error);
		border-width: 2px;
		color: var(--upl-input--color-text-error);
		&:focus {
			border-color: var(--upl-input--color-border-active);
		}
	}
}

.textarea-wrap {
	@include flex-layout($fd:column, $ai:normal);
	gap: var(--upl-gap-3);
	width: 100%;
}
.textarea-count {
	--upl-input--count-number-pc-font-size: var(--upl-pc-font-size-body-small);
	--upl-input--count-number-mobile-font-size: var(--upl-mobile-font-size-body-small);
	--upl-input--count-number-color-text: var(--upl-#{$mode-setting}-color-text-subtle);
	--upl-input--count-number-color-text-active: var(--upl-#{$mode-setting}-color-text-primary);
	--upl-input--count-number-color-text-error: var(--upl-#{$mode-setting}-color-text-danger);

	@include flex-layout($ai: center, $jc: flex-end);
	gap: var(--upl-gap-1);
	width: 100%;
	font-size: var(--upl-input--count-number-pc-font-size);
	color: var(--upl-input--count-number-color-text);
	@include size-medium {
		font-size: var(--upl-input--count-number-mobile-font-size);
	}
	.count-now {
		color: var(--upl-input--count-number-color-text-active);
	}
}
.is-error {
	.textarea-count {
		.count-now {
			color: var(--upl-input--count-number-color-text-error);
		}
	}
}


.textarea-bottom {
	@include flex-layout();
	gap: var(--upl-gap-5);
	.textarea-count {
		margin-left: auto;
		flex-basis: content;
		order:2;
	}
	.form-hint-invalid {
		align-items: flex-start;
		order:1;
		&::before {
			flex:none;
		}
	}
}

/* 날짜선택 */
.calendar-input {
	--upl-input--color-surface: var(--upl-#{$mode-setting}-color-input-surface);

	position: relative;
	z-index: 1;
	width: 100%;
	.upl-input {
		padding-right: var(--upl-form-group--icon-padding-right);
		background-image: none;
	}
	.upl-btn {
		@include position($t: 50%, $r: var(--upl-padding-7)); //form control large 사이즈에만 버튼 들어감
		transform: translateY(-50%);
	}
    .range {
        &::after {
            display:none;
        }
    }
}

//고대비모드
@include color-mode($mode: dark) {
	//모드 설정
	$mode-setting: dark;

	.upl-input {
		@include input-color-variable($mode: #{$mode-setting});
		@include border-size-mode(#{$mode-setting});
	}
	.textarea-count {
		--upl-input--count-number-color-text: var(--upl-#{$mode-setting}-color-text-subtle);
		--upl-input--count-number-color-text-active: var(--upl-#{$mode-setting}-color-text-primary);
	}

	/* 날짜선택 */
	.calendar-input {
		--upl-input--color-surface: var(--upl-#{$mode-setting}-color-input-surface);
	}
}