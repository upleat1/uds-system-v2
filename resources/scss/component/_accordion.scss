/* 아코디언 */
//사이즈 정의
@mixin accordion-size-variable() {
	--upl-accordion--list-margin-y: var(--upl-padding-2);
	--upl-accordion--padding: var(--upl-padding-8);
	--upl-accordion--button-padding-right: calc(var(--upl-accordion--padding) + var(--upl-gap-5) + var(--upl-accordion--button-icon-size));
	--upl-accordion--line-padding: var(--upl-padding-7);
	--upl-accordion--line-button-padding-right: calc(var(--upl-gap-5) + var(--upl-accordion--button-icon-size));
	--upl-accordion--button-icon-size: var(--upl-icon--size-large);
	--upl-accordion--radius: var(--upl-radius-large2 );
	--upl-accordion--button-pc-font-size: var(--upl-pc-font-size-heading-xsmall);
	--upl-accordion--button-mobile-font-size: var(--upl-mobile-font-size-heading-xsmall);
}

//컬러 정의
@mixin accordion-color-variable($mode: light) {
	--upl-accordion--color-action: var(--upl-#{$mode}-color-action-secondary);
	--upl-accordion--button-color-action: var(--upl-#{$mode}-color-action-secondary);
	--upl-accordion--button-color-action-hover: var(--upl-#{$mode}-color-action-secondary-hover);
	--upl-accordion--button-color-action-pressed: var(--upl-#{$mode}-color-action-secondary-pressed);
	--upl-accordion--color-action-open: var(--upl-#{$mode}-color-action-secondary-hover);
	--upl-accordion--color-divider: var(--upl-#{$mode}-color-divider-gray-light);
	--upl-accordion--color-divider-open: var(--upl-#{$mode}-color-divider-gray-dark);
	--upl-accordion--button-color-text: var(--upl-#{$mode}-color-text-basic);
	--upl-accordion--button-color-text-open: var(--upl-#{$mode}-color-text-secondary);
	--upl-accordion--color-icon: var(--upl-#{$mode}-color-icon-gray);
}

//모드 설정
$mode-setting: light;
.upl-accordion {
	@include accordion-size-variable();
	@include accordion-color-variable($mode: #{$mode-setting});
	padding: var(--upl-accordion--list-margin-y) 0;
	border-top: 0.1rem solid var(--upl-accordion--color-divider);
	border-bottom: 0.1rem solid var(--upl-accordion--color-divider);
	.accordion-item {
		padding: var(--upl-accordion--list-margin-y) 0;

		transition: var(--upl-transition-base);
		.btn-accordion {
			position: relative;
			width: 100%;
			padding: var(--upl-accordion--padding) var(--upl-accordion--button-padding-right) var(--upl-accordion--padding) var(--upl-accordion--padding);
			background-color: var(--upl-accordion--button-color-action);
			border-radius: var(--upl-accordion--radius);
			font-size: var(--upl-accordion--button-pc-font-size);
			color: var(--upl-accordion--button-color-text);
			font-weight: var(--upl-font-weight-bold);
			text-align: left;
			@include size-medium {
				font-size: var(--upl-accordion--button-mobile-font-size);
			}
			&:hover {
				background-color: var(--upl-accordion--button-color-action-hover);
			}
			&:active {
				background-color: var(--upl-accordion--button-color-action-pressed);
			}
			&::after {
				@include position($t: var(--upl-accordion--padding), $r: var(--upl-accordion--padding));
				@include pseudo();
				@include svg-icon(var(--upl-accordion--button-icon-size), $mode: #{$mode-setting});
				@include icon-set(ico_angle);
				background-color: var(--upl-accordion--color-icon);
				transition: var(--upl-transition-base);
				transform: rotate(0deg);
			}
			&.active {
				background-color: var(--upl-accordion--color-action-open);
				border-bottom-left-radius: 0;
				border-bottom-right-radius: 0;
				color: var(--upl-accordion--button-color-text-open);
				&:focus {
					border-radius: var(--upl-accordion--radius);
				}
				&::after {
					transform: rotate(180deg);
				}
			}
		}
		.accordion-collapse {
			max-height: 0;
			overflow: hidden;
			transition: all .5s cubic-bezier(0, 1, 0, 1);
			visibility: hidden;
		}
		.accordion-body {
			padding: 0 var(--upl-accordion--padding) var(--upl-accordion--padding);
			background-color: var(--upl-accordion--color-action);
			border-bottom-left-radius: var(--upl-accordion--radius);
			border-bottom-right-radius: var(--upl-accordion--radius);
		}
		&.active {
			.accordion-collapse {
				height: auto;
				max-height: 100vh;
				transition: all 1.5s ease-in-out;
				visibility: visible;
			}
			.accordion-body {
				background-color: var(--upl-accordion--color-action-open);
			}
		}
	}

	//라인형
	&.type-line {
		padding: 0;
		border-top: none;
		.accordion-item {
			border-top: 0.1rem solid var(--upl-accordion--color-divider);
			border-radius: 0;
			.btn-accordion {
				padding: var(--upl-accordion--line-padding) var(--upl-accordion--line-button-padding-right) var(--upl-accordion--line-padding) 0;
				&::after {
					top: var(--upl-accordion--line-padding);
					right: 0;
				}
				&.active {
					background: none;
				}
			}
			.accordion-body {
				padding: 0 0 var(--upl-accordion--padding);
			}
			&.active {
				background: none;
				border-top-color: var(--upl-accordion--color-divider-open);
				.accordion-body {
					background: none;
				}
			}
		}

	}
}

//고대비모드
@include color-mode($mode: dark) {
	//모드 설정
	$mode-setting: dark;
	.upl-accordion {
		@include accordion-color-variable($mode: #{$mode-setting});
	}

}

@include size-medium {
	.upl-accordion{
		--upl-accordion--padding: var(--upl-padding-6);
		--upl-accordion--line-padding: var(--upl-padding-5);
		--upl-accordion--button-icon-size: var(--upl-icon--size-medium);
	}
}